(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{229:function(t,e,r){"use strict";r.r(e);var n=r(2),c=(r(24),r(19),{components:{QrcodeStream:r(222).QrcodeStream},data:function(){return{code:"",user:this.$auth.user,isScan:!1,camera:"rear",torchActive:!1,torchNotSupported:!1,noRearCamera:!1,noFrontCamera:!1}},methods:{onDecode:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,code;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=JSON.parse(t),n.event,code=n.code,e.isScan=!1,e.torchActive=!1,$("#scanQR").modal("hide"),e.code=code,e.getSchedule();case 6:case"end":return r.stop()}}),r)})))()},getSchedule:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.requestGet({endpoint:"/getCode/"+t.code});case 2:if(!(r=e.sent).success){e.next=13;break}return e.next=6,t.konfirm("melakukan presensi di event "+r.data.event);case 6:if(n=e.sent,!n.isConfirmed){e.next=13;break}return e.next=11,t.requestGet({endpoint:"/postPresent/"+r.data.id,notif:!1});case 11:e.sent.success&&t.$swal({title:"terima kasih!",text:"telah hadir di event "+r.data.event,icon:"success"});case 13:case"end":return e.stop()}}),e)})))()},switchCamera:function(){switch(this.camera){case"front":this.camera="rear";break;case"rear":this.camera="front"}},onInit:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,c,o,d,l,m;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t;case 3:n=r.sent,c=n.capabilities,e.torchNotSupported=!c.torch,r.next=15;break;case 8:r.prev=8,r.t0=r.catch(0),o="front"===e.camera,d="rear"===e.camera,l="auto"===e.camera,m="OverconstrainedError"===r.t0.name,d&&m?e.camera="front":o&&m?e.camera="auto":l&&m&&(e.camera="rear");case 15:case"end":return r.stop()}}),r,null,[[0,8]])})))()}}}),o=r(5),component=Object(o.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("button",{staticClass:"thm-btn w-100 ",attrs:{"data-toggle":"modal","data-target":"#scanQR"},on:{click:function(e){t.isScan=!0}}},[r("i",{staticClass:"fas fa-qrcode"}),t._v(" | Presensi Acara\n  ")]),t._v(" "),r("div",{staticClass:"modal fade",attrs:{id:"scanQR","data-backdrop":"false","data-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"}},[r("div",{staticClass:"modal-dialog modal-dialog-centered"},[r("div",{staticClass:"modal-content rounded"},[r("div",{staticClass:"modal-header"},[r("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("Scan QR Code Event")]),t._v(" "),r("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:function(e){t.torchActive=t.isScan=!1}}},[r("span",{attrs:{"aria-hidden":"true"}},[t._v("Ã—")])])]),t._v(" "),r("div",{staticClass:"modal-body"},[r("div",{staticStyle:{height:"60vh"}},[t.isScan?r("qrcode-stream",{attrs:{camera:t.camera,torch:t.torchActive},on:{decode:t.onDecode,init:t.onInit}}):t._e()],1),t._v(" "),r("div",{staticStyle:{height:"25vh"}},[r("hr"),t._v(" "),r("div",{staticClass:"text-center mb-3"},[r("button",{staticClass:"btn btn-secondary",on:{click:t.switchCamera}},[r("i",{staticClass:"fas fa-camera fa-lg"})]),t._v(" "),r("button",{staticClass:"btn ml-3",class:t.torchActive?"btn-primary":"btn-secondary",attrs:{disabled:t.torchNotSupported},on:{click:function(e){t.torchActive=!t.torchActive}}},[r("i",{staticClass:"far fa-lightbulb fa-lg"})]),t._v(" "),t.torchNotSupported?r("p",{staticClass:"error"},[t._v("\n                Torch not supported for active camera\n              ")]):t._e()]),t._v(" "),r("div",{staticClass:"input-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],staticClass:"form-control rounded-left",attrs:{type:"text",placeholder:"Menggunakan kode","aria-label":"Recipient's username","aria-describedby":"button-addon2"},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}}),t._v(" "),r("div",{staticClass:"input-group-append"},[r("button",{staticClass:"btn btn-primary",staticStyle:{width:"100px"},attrs:{type:"button",id:"button-addon2"},on:{click:function(e){return t.getSchedule()}}},[t._v("Hadir")])])])])])])])])])}),[],!1,null,null,null);e.default=component.exports}}]);